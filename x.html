<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>WASM Fetch Demo</title>
</head>
<body>
    <script type="module">
        import init, { WasmFetch } from '/p/proxy/wasm_fetch.js';
        
        async function main() {
            // 初始化 wasm-bindgen
            await init();
            
            // 使用自动生成的类
            const fetch = new WasmFetch('https://jsonplaceholder.typicode.com');
            
            // GET 请求
            const resp = await fetch.get('/todos/1');
            console.log('Response:', resp);
            
            // 处理响应
            if (resp.ok) {
                const data = await resp.json();
                console.log('Data:', data);
            }
        }
        
        main().catch(console.error);
    </script>
</body>
</html>